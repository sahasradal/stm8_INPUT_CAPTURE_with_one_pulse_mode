# stm8_INPUT_CAPTURE_with_one_pulse_mode
stm8_INPUT_CAPTURE_with_one_pulse_mode
input capture with timer1 on TIM1_CH4 on PC4. Timer1 overflow interrupt is enabled for 1 second and timer is enabled with OPM/one pulse mode. So timer 1 overflow is enabled 1 time in OPM mode at the end of 1 second period the timer is turned off by the OPM bit. If there is a signal with rising edge between the 1 second period the capture interrupt records the value. If a signal above 1hz is present the input capture interrupt captures 2 values and subtracts the 1st from 2nd. This value is multiplied by the period of 1 cycle and period of signal is determined in milli seconds. This period is used to divide 1000ms to get the final frequency. This is all done inside the capture ISR and the calculated values are converted ti ASCII values. The ASCII values are transmitted by UART to console at baud9600 using pins ;UART1_TX PD5	;UART1_RX PD6. An LED can be driven by PD3 for visual indication of timer oerflow. included is the complete STVISUAL DEVELOPER project that can be loaded and compiled .
